specVersion: 0.0.2

schema:
    file: ./schema.graphql

dataSources:

    - kind: ethereum/contract
      name: Topx
      network: rinkeby
      source:
        abi: Topx
        startBlock: 8600000
        address: "0x215E186E4F83366E7307838F6A310D421414aF71"
      mapping:
        kind: ethereum/events
        apiVersion: 0.0.4
        language: wasm/assemblyscript
        entities:
          - LootBox
          - LootBoxItem
          - Token
          - Transfer
          - Account
        file: ./src/mapping.ts
        abis:
          - name: IERC165Upgradeable
            file: ./contracts/IERC165Upgradeable.json
          - name: Topx
            file: ./contracts/Topx.json
        eventHandlers:
          - event: addLootBox(uint256,uint256,address,uint256,uint256) 
            handler: handleAddLootBox
          - event: addLootBoxItem(uint256,uint256,uint256,address,uint256) 
            handler: handleAddLootBoxItem
          - event: mintLootBox(uint256,address,uint256,uint256)
            handler: handleMintLootBox
          - event: mintItem(uint256,address,uint256)
            handler: handleMintItem
          - event: TransferSingle(indexed address,indexed address,indexed address,uint256,uint256) 
            handler: handleTransferSingle
          - event:  TransferBatch(indexed address,indexed address,indexed address,uint256[],uint256[])
            handler: handleTransferBatch
          - event: EthTopxTransfer(uint8,uint256,uint256,address,address)
            handler: handleEthTopxTransfer
  
    - kind: ethereum/contract
      name: Marketplace
      network: rinkeby
      source:
        abi: Marketplace
        startBlock: 8600000
        address: "0x9218DE3c5f4f5D3D7f7a7E65221bBF6fE2aDAa39"
      mapping:
        kind: ethereum/events
        apiVersion: 0.0.4
        language: wasm/assemblyscript
        entities:
          - LootBox
          - LootBoxItem
          - Token
          - Order
          - OrderReceipt
          - Transfer
          - Account
        file: ./src/mapping.ts
        abis:
          - name: Marketplace
            file: ./contracts/Marketplace.json
        eventHandlers:
          - event: OrderCreated(address,uint256,uint256) 
            handler: handleOrderCreated
          - event: OrderBought(address,uint256) 
            handler: handleOrderBought
          - event: OrderCanceled(uint256) 
            handler: handleOrderCanceled
          - event: MarketplaceEthTransfer(uint8,uint256,uint256,address,address)
            handler: handleMarketplaceEthTransfer